<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>MS backend accessing the MassBank MySQL database — MsBackendMassbankSql • MsBackendMassbank</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="MS backend accessing the MassBank MySQL database — MsBackendMassbankSql" />
<meta property="og:description" content="The MsBackendMassbankSql provides access to mass spectrometry data from
MassBank by directly accessing its
MySQL/MariaDb database. In addition it supports adding new spectra variables
or locally changing spectra variables provided by MassBank (withoug
changing the original values in the database).
Note that MsBackendMassbankSql requires a local installation of the
MassBank database since direct database access is not supported for the
main MassBank instance.
Also, some of the fields in the MassBank database are not directly compatible
with Spectra, such as the collision energy which is not available as a
numeric value. The collision energy as available in MassBank is reported as
spectra variable &quot;collisionEnergyText&quot;." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">MsBackendMassbank</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../articles/MsBackendMassbank.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/michaelwitting/MsBackendMassbank/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>MS backend accessing the MassBank MySQL database</h1>
    <small class="dont-index">Source: <a href='https://github.com/michaelwitting/MsBackendMassbank/blob/master/R/MsBackendMassbankSql-functions.R'><code>R/MsBackendMassbankSql-functions.R</code></a>, <a href='https://github.com/michaelwitting/MsBackendMassbank/blob/master/R/MsBackendMassbankSql.R'><code>R/MsBackendMassbankSql.R</code></a></small>
    <div class="hidden name"><code>MsBackendMassbankSql.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>The <code>MsBackendMassbankSql</code> provides access to mass spectrometry data from
<a href='https://massbank.eu/MassBank/'>MassBank</a> by directly accessing its
MySQL/MariaDb database. In addition it supports adding new spectra variables
or <em>locally</em> changing spectra variables provided by MassBank (withoug
changing the original values in the database).</p>
<p>Note that <code>MsBackendMassbankSql</code> requires a local installation of the
MassBank database since direct database access is not supported for the
<em>main</em> MassBank instance.</p>
<p>Also, some of the fields in the MassBank database are not directly compatible
with <code>Spectra</code>, such as the <em>collision energy</em> which is not available as a
numeric value. The collision energy as available in MassBank is reported as
spectra variable <code>"collisionEnergyText"</code>.</p>
    </div>

    <pre class="usage">MsBackendMassbankSql()

# S4 method for MsBackendMassbankSql
show(object)

# S4 method for MsBackendMassbankSql
backendInitialize(object, dbcon, ...)

# S4 method for MsBackendMassbankSql
acquisitionNum(object)

# S4 method for MsBackendMassbankSql
peaksData(object)

# S4 method for MsBackendMassbankSql
centroided(object)

# S4 method for MsBackendMassbankSql
centroided(object) &lt;- value

# S4 method for MsBackendMassbankSql
collisionEnergy(object)

# S4 method for MsBackendMassbankSql
collisionEnergy(object) &lt;- value

# S4 method for MsBackendMassbankSql
dataOrigin(object)

# S4 method for MsBackendMassbankSql
dataOrigin(object) &lt;- value

# S4 method for MsBackendMassbankSql
dataStorage(object)

# S4 method for MsBackendMassbankSql
intensity(object)

# S4 method for MsBackendMassbankSql
intensity(object) &lt;- value

# S4 method for MsBackendMassbankSql
ionCount(object)

# S4 method for MsBackendMassbankSql
isEmpty(x)

# S4 method for MsBackendMassbankSql
isolationWindowLowerMz(object)

# S4 method for MsBackendMassbankSql
isolationWindowLowerMz(object) &lt;- value

# S4 method for MsBackendMassbankSql
isolationWindowTargetMz(object)

# S4 method for MsBackendMassbankSql
isolationWindowTargetMz(object) &lt;- value

# S4 method for MsBackendMassbankSql
isolationWindowUpperMz(object)

# S4 method for MsBackendMassbankSql
isolationWindowUpperMz(object) &lt;- value

# S4 method for MsBackendMassbankSql
length(x)

# S4 method for MsBackendMassbankSql
msLevel(object)

# S4 method for MsBackendMassbankSql
mz(object)

# S4 method for MsBackendMassbankSql
mz(object) &lt;- value

# S4 method for MsBackendMassbankSql
lengths(x, use.names = FALSE)

# S4 method for MsBackendMassbankSql
polarity(object)

# S4 method for MsBackendMassbankSql
polarity(object) &lt;- value

# S4 method for MsBackendMassbankSql
precursorCharge(object)

# S4 method for MsBackendMassbankSql
precursorIntensity(object)

# S4 method for MsBackendMassbankSql
precursorMz(object)

# S4 method for MsBackendMassbankSql
reset(object)

# S4 method for MsBackendMassbankSql
rtime(object)

# S4 method for MsBackendMassbankSql
rtime(object) &lt;- value

# S4 method for MsBackendMassbankSql
scanIndex(object)

# S4 method for MsBackendMassbankSql
selectSpectraVariables(object, spectraVariables = spectraVariables(object))

# S4 method for MsBackendMassbankSql
smoothed(object)

# S4 method for MsBackendMassbankSql
smoothed(object) &lt;- value

# S4 method for MsBackendMassbankSql
spectraData(object, columns = spectraVariables(object))

# S4 method for MsBackendMassbankSql
spectraData(object) &lt;- value

# S4 method for MsBackendMassbankSql
spectraNames(object)

# S4 method for MsBackendMassbankSql
spectraNames(object) &lt;- value

# S4 method for MsBackendMassbankSql
spectraVariables(object)

# S4 method for MsBackendMassbankSql
tic(object, initial = TRUE)

# S4 method for MsBackendMassbankSql
[(x, i, j, ..., drop = FALSE)

# S4 method for MsBackendMassbankSql
$(x, name)

# S4 method for MsBackendMassbankSql
$(x, name) &lt;- value</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>object</th>
      <td><p>Object extending <code>MsBackendMassbankSql</code>.</p></td>
    </tr>
    <tr>
      <th>dbcon</th>
      <td><p>For <code>backendInitialize,MsBackendMassbankSql</code>: SQL database
connection to the MassBank (MariaDb) database.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Additional arguments.</p></td>
    </tr>
    <tr>
      <th>value</th>
      <td><p>replacement value for <code>&lt;-</code> methods. See individual
method description or expected data type.</p></td>
    </tr>
    <tr>
      <th>x</th>
      <td><p>Object extending <code>MsBackendMassbankSql</code>.</p></td>
    </tr>
    <tr>
      <th>use.names</th>
      <td><p>For <code>lengths</code>: whether spectrum names should be used.</p></td>
    </tr>
    <tr>
      <th>spectraVariables</th>
      <td><p>For <code>selectSpectraVariables</code>: <code>character</code> with the
names of the spectra variables to which the backend should be subsetted.</p></td>
    </tr>
    <tr>
      <th>columns</th>
      <td><p>For <code>spectraData</code> accessor: optional <code>character</code> with column
names (spectra variables) that should be included in the
returned <code>DataFrame</code>. By default, all columns are returned.</p></td>
    </tr>
    <tr>
      <th>initial</th>
      <td><p>For <code>tic</code>: <code><a href='https://rdrr.io/r/base/logical.html'>logical(1)</a></code> whether the initially
reported total ion current should be reported, or whether the
total ion current should be (re)calculated on the actual data
(<code>initial = FALSE</code>).</p></td>
    </tr>
    <tr>
      <th>i</th>
      <td><p>For <code><a href='https://rdrr.io/r/base/Extract.html'>[</a></code>: <code>integer</code>, <code>logical</code> or <code>character</code> to subset the object.</p></td>
    </tr>
    <tr>
      <th>j</th>
      <td><p>For <code><a href='https://rdrr.io/r/base/Extract.html'>[</a></code>: not supported.</p></td>
    </tr>
    <tr>
      <th>drop</th>
      <td><p>For <code><a href='https://rdrr.io/r/base/Extract.html'>[</a></code>: not considered.</p></td>
    </tr>
    <tr>
      <th>name</th>
      <td><p>For <code><a href='https://rdrr.io/r/base/Extract.html'>$</a></code> and <code>$&lt;-</code>: the name of the spectra variable to return
or set.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>See documentation of respective function.</p>
    <h2 class="hasAnchor" id="supported-backend-functions"><a class="anchor" href="#supported-backend-functions"></a>Supported Backend functions</h2>

    


<p>The following functions are supported by the <code>MsBackendMassbankSqlMassbankDb</code>.</p><ul>
<li><p><code><a href='https://rdrr.io/r/base/Extract.html'>[</a></code>: subset the backend. Only subsetting by element (<em>row</em>/<code>i</code>) is
allowed</p></li>
<li><p><code><a href='https://rdrr.io/r/base/Extract.html'>$</a></code>, <code>$&lt;-</code>: access or set/add a single spectrum variable (column) in the
backend.</p></li>
<li><p><code>acquisitionNum</code>: returns the acquisition number of each
spectrum. Returns an <code>integer</code> of length equal to the number of
spectra (with <code>NA_integer_</code> if not available).</p></li>
<li><p><code>peaksData</code> returns a <code>list</code> with the spectras' peak data. The length of
the list is equal to the number of spectra in <code>object</code>. Each element of
the list is a <code>matrix</code> with columns <code>"mz"</code> and <code>"intensity"</code>. For an empty
spectrum, a <code>matrix</code> with 0 rows and two columns (named <code>mz</code> and
<code>intensity</code>) is returned.</p></li>
<li><p><code>backendInitialize</code>: initialises the backend by retrieving the IDs of all
spectra in the database. Parameter <code>dbcon</code> with the connection to the
MassBank MySQL database is required.</p></li>
<li><p><code>dataOrigin</code>: gets a <code>character</code> of length equal to the number of spectra
in <code>object</code> with the <em>data origin</em> of each spectrum. This could e.g. be
the mzML file from which the data was read.</p></li>
<li><p><code>dataStorage</code>: returns <code>"&lt;MassBank&gt;"</code> for all spectra.</p></li>
<li><p><code>centroided</code>, <code>centroided&lt;-</code>: gets or sets the centroiding
information of the spectra. <code>centroided</code> returns a <code>logical</code>
vector of length equal to the number of spectra with <code>TRUE</code> if a
spectrum is centroided, <code>FALSE</code> if it is in profile mode and <code>NA</code>
if it is undefined. See also <code>isCentroided</code> for estimating from
the spectrum data whether the spectrum is centroided.  <code>value</code>
for <code>centroided&lt;-</code> is either a single <code>logical</code> or a <code>logical</code> of
length equal to the number of spectra in <code>object</code>.</p></li>
<li><p><code>collisionEnergy</code>, <code>collisionEnergy&lt;-</code>: gets or sets the
collision energy for all spectra in <code>object</code>. <code>collisionEnergy</code>
returns a <code>numeric</code> with length equal to the number of spectra
(<code>NA_real_</code> if not present/defined), <code>collisionEnergy&lt;-</code> takes a
<code>numeric</code> of length equal to the number of spectra in <code>object</code>. Note that
the collision energy description from MassBank are provided as spectra
variable <code>"collisionEnergyText"</code>.</p></li>
<li><p><code>intensity</code>: gets the intensity values from the spectra. Returns
a <code>NumericList()</code> of <code>numeric</code> vectors (intensity values for each
spectrum). The length of the <code>list</code> is equal to the number of
<code>spectra</code> in <code>object</code>.</p></li>
<li><p><code>ionCount</code>: returns a <code>numeric</code> with the sum of intensities for
each spectrum. If the spectrum is empty (see <code>isEmpty</code>),
<code>NA_real_</code> is returned.</p></li>
<li><p><code>isCentroided</code>: a heuristic approach assessing if the spectra in
<code>object</code> are in profile or centroided mode. The function takes
the <code>qtl</code> th quantile top peaks, then calculates the difference
between adjacent m/z value and returns <code>TRUE</code> if the first
quartile is greater than <code>k</code>. (See <code>Spectra:::.isCentroided</code> for
the code.)</p></li>
<li><p><code>isEmpty</code>: checks whether a spectrum in <code>object</code> is empty
(i.e. does not contain any peaks). Returns a <code>logical</code> vector of
length equal number of spectra.</p></li>
<li><p><code>isolationWindowLowerMz</code>, <code>isolationWindowLowerMz&lt;-</code>: gets or sets the
lower m/z boundary of the isolation window.</p></li>
<li><p><code>isolationWindowTargetMz</code>, <code>isolationWindowTargetMz&lt;-</code>: gets or sets the
target m/z of the isolation window.</p></li>
<li><p><code>isolationWindowUpperMz</code>, <code>isolationWindowUpperMz&lt;-</code>: gets or sets the
upper m/z boundary of the isolation window.</p></li>
<li><p><code>isReadOnly</code>: returns a <code><a href='https://rdrr.io/r/base/logical.html'>logical(1)</a></code> whether the backend is <em>read
only</em> or does allow also to write/update data.</p></li>
<li><p><code>length</code>: returns the number of spectra in the object.</p></li>
<li><p><code>lengths</code>: gets the number of peaks (m/z-intensity values) per
spectrum.  Returns an <code>integer</code> vector (length equal to the
number of spectra). For empty spectra, <code>0</code> is returned.</p></li>
<li><p><code>msLevel</code>: gets the spectra's MS level. Returns an <code>integer</code>
vector (of length equal to the number of spectra) with the MS
level for each spectrum (or <code>NA_integer_</code> if not available).</p></li>
<li><p><code>mz</code>: gets the mass-to-charge ratios (m/z) from the
spectra. Returns a <code>NumericList()</code> or length equal to the number of
spectra, each element a <code>numeric</code> vector with the m/z values of
one spectrum.</p></li>
<li><p><code>polarity</code>, <code>polarity&lt;-</code>: gets or sets the polarity for each
spectrum.  <code>polarity</code> returns an <code>integer</code> vector (length equal
to the number of spectra), with <code>0</code> and <code>1</code> representing negative
and positive polarities, respectively. <code>polarity&lt;-</code> expects an
integer vector of length 1 or equal to the number of spectra.</p></li>
<li><p><code>precursorCharge</code>, <code>precursorIntensity</code>, <code>precursorMz</code>,
<code>precScanNum</code>, <code>precAcquisitionNum</code>: get the charge (<code>integer</code>),
intensity (<code>numeric</code>), m/z (<code>numeric</code>), scan index (<code>integer</code>)
and acquisition number (<code>interger</code>) of the precursor for MS level
2 and above spectra from the object. Returns a vector of length equal to
the number of spectra in <code>object</code>. <code>NA</code> are reported for MS1
spectra of if no precursor information is available.</p></li>
<li><p><code>reset</code>: restores the backend to its original state, i.e. deletes all
locally modified data and reinitializes the backend to the full data
available in the database.</p></li>
<li><p><code>rtime</code>, <code>rtime&lt;-</code>: gets or sets the retention times for each
spectrum (in seconds). <code>rtime</code> returns a <code>numeric</code> vector (length equal to
the number of spectra) with the retention time for each spectrum.
<code>rtime&lt;-</code> expects a numeric vector with length equal to the
number of spectra.</p></li>
<li><p><code>scanIndex</code>: returns an <code>integer</code> vector with the <em>scan index</em>
for each spectrum. This represents the relative index of the
spectrum within each file. Note that this can be different to the
<code>acquisitionNum</code> of the spectrum which is the index of the
spectrum as reported in the mzML file.</p></li>
<li><p><code>selectSpectraVariables</code>: reduces the information within the backend to
the selected spectra variables.</p></li>
<li><p><code>smoothed</code>,<code>smoothed&lt;-</code>: gets or sets whether a spectrum is
<em>smoothed</em>. <code>smoothed</code> returns a <code>logical</code> vector of length equal
to the number of spectra. <code>smoothed&lt;-</code> takes a <code>logical</code> vector
of length 1 or equal to the number of spectra in <code>object</code>.</p></li>
<li><p><code>spectraData</code>: gets general spectrummetadata (annotation, also called
header).  <code>spectraData</code> returns a <code>DataFrame</code>. Note that replacing the
spectra data with <code>spectraData&lt;-</code> is not supported.</p></li>
<li><p><code>spectraNames</code>: returns a <code>character</code> vector with the names of
the spectra in <code>object</code>.</p></li>
<li><p><code>spectraVariables</code>: returns a <code>character</code> vector with the
available spectra variables (columns, fields or attributes)
available in <code>object</code>. This should return <strong>all</strong> spectra variables which
are present in <code>object</code>, also <code>"mz"</code> and <code>"intensity"</code> (which are by
default not returned by the <code>spectraVariables,Spectra</code> method).</p></li>
<li><p><code>tic</code>: gets the total ion current/count (sum of signal of a
spectrum) for all spectra in <code>object</code>. By default, the value
reported in the original raw data file is returned. For an empty
spectrum, <code>NA_real_</code> is returned.</p></li>
</ul>

    <h2 class="hasAnchor" id="not-supported-backend-functions"><a class="anchor" href="#not-supported-backend-functions"></a>Not supported Backend functions</h2>

    


<p>The following functions are not supported by the <code>MsBackendMassbankSql</code> since
the original data can not be changed.</p>
<p><code>backendMerge</code>, <code>export</code>, <code>filterDataStorage</code>, <code>filterPrecursorScan</code>,
<code>peaksData&lt;-</code>, <code>filterAcquisitionNum</code>, <code>intensity&lt;-</code>, <code>mz&lt;-</code>, <code>precScanNum</code>,
<code>spectraData&lt;-</code>, <code>spectraNames&lt;-</code>.</p>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Johannes Rainer</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='co'>## Create a connection to a database with MassBank data - in the present</span>
<span class='co'>## example we connect to a tiny SQLite database bundled in this package</span>
<span class='co'>## as public access to the MassBank MySQL is not (yet) supported. See the</span>
<span class='co'>## vignette for more information on how to install MassBank locally and</span>
<span class='co'>## enable MySQL database connections</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://rsqlite.r-dbi.org'>RSQLite</a></span><span class='op'>)</span>
<span class='va'>con</span> <span class='op'>&lt;-</span> <span class='fu'>dbConnect</span><span class='op'>(</span><span class='fu'><a href='https://rsqlite.r-dbi.org/reference/SQLite.html'>SQLite</a></span><span class='op'>(</span><span class='op'>)</span>, <span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span><span class='op'>(</span><span class='st'>"sql/minimassbank.sql"</span>, package <span class='op'>=</span> <span class='st'>"MsBackendMassbank"</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'>## Given that we have the connection to a MassBank databas we can</span>
<span class='co'>## initialize the backend:</span>
<span class='va'>be</span> <span class='op'>&lt;-</span> <span class='fu'>backendInitialize</span><span class='op'>(</span><span class='fu'>MsBackendMassbankSql</span><span class='op'>(</span><span class='op'>)</span>, dbcon <span class='op'>=</span> <span class='va'>con</span><span class='op'>)</span>
<span class='va'>be</span>
</div><div class='output co'>#&gt; MsBackendMassbankSql with 3 spectra
#&gt;     msLevel precursorMz  polarity
#&gt;   &lt;integer&gt;   &lt;numeric&gt; &lt;integer&gt;
#&gt; 1         2      179.07         1
#&gt; 2         2      179.07         1
#&gt; 3         2      179.07         1
#&gt;  ... 30 more variables/columns.
#&gt;  Use  'spectraVariables' to list all of them.</div><div class='input'>
<span class='co'>## Access MS level</span>
<span class='fu'>msLevel</span><span class='op'>(</span><span class='va'>be</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [1] 2 2 2</div><div class='input'><span class='va'>be</span><span class='op'>$</span><span class='va'>msLevel</span>
</div><div class='output co'>#&gt; [1] 2 2 2</div><div class='input'>
<span class='co'>## Access m/z values</span>
<span class='va'>be</span><span class='op'>$</span><span class='va'>mz</span>
</div><div class='output co'>#&gt; NumericList of length 3
#&gt; [["AC000001"]] 133.0648 151.0754 155.9743 161.0597 179.0703
#&gt; [["AC000002"]] 133.0648 151.0754 155.9745 161.0597 179.0703
#&gt; [["AC000003"]] 105.0699 133.0648 151.0754 161.0597 179.0703</div><div class='input'>
<span class='co'>## Access the full spectra data (including m/z and intensity values)</span>
<span class='fu'>spectraData</span><span class='op'>(</span><span class='va'>be</span><span class='op'>)</span>
</div><div class='output co'>#&gt; DataFrame with 3 rows and 33 columns
#&gt;     msLevel     rtime acquisitionNum scanIndex                          mz
#&gt;   &lt;integer&gt; &lt;numeric&gt;      &lt;integer&gt; &lt;integer&gt;               &lt;NumericList&gt;
#&gt; 1         2        NA             NA        NA 133.065,151.075,155.974,...
#&gt; 2         2        NA             NA        NA 133.065,151.075,155.975,...
#&gt; 3         2        NA             NA        NA 105.070,133.065,151.075,...
#&gt;                        intensity dataStorage             dataOrigin centroided
#&gt;                    &lt;NumericList&gt; &lt;character&gt;            &lt;character&gt;  &lt;logical&gt;
#&gt; 1    21905.3, 9239.9,10980.9,...  &lt;MassBank&gt; Renaud, J. B.; Sumar..         NA
#&gt; 2 46563.64,20681.71, 8681.31,...  &lt;MassBank&gt; Renaud, J. B.; Sumar..         NA
#&gt; 3  22225.4,155144.7, 51027.0,...  &lt;MassBank&gt; Renaud, J. B.; Sumar..         NA
#&gt;    smoothed  polarity precScanNum precursorMz precursorIntensity
#&gt;   &lt;logical&gt; &lt;integer&gt;   &lt;integer&gt;   &lt;numeric&gt;          &lt;numeric&gt;
#&gt; 1        NA         1          NA      179.07            161.059
#&gt; 2        NA         1          NA      179.07            161.059
#&gt; 3        NA         1          NA      179.07            161.059
#&gt;   precursorCharge collisionEnergy isolationWindowLowerMz
#&gt;         &lt;integer&gt;       &lt;numeric&gt;              &lt;numeric&gt;
#&gt; 1              NA              NA                     NA
#&gt; 2              NA              NA                     NA
#&gt; 3              NA              NA                     NA
#&gt;   isolationWindowTargetMz isolationWindowUpperMz spectrum_id
#&gt;                 &lt;numeric&gt;              &lt;numeric&gt; &lt;character&gt;
#&gt; 1                      NA                     NA    AC000001
#&gt; 2                      NA                     NA    AC000002
#&gt; 3                      NA                     NA    AC000003
#&gt;            spectrum_name        date                authors     license
#&gt;              &lt;character&gt; &lt;character&gt;            &lt;character&gt; &lt;character&gt;
#&gt; 1 Mellein; LC-ESI-ITFT..  2017.07.07 Justin B. Renaud, Ma..    CC BY-SA
#&gt; 2 Mellein; LC-ESI-ITFT..  2017.07.07 Justin B. Renaud, Ma..    CC BY-SA
#&gt; 3 Mellein; LC-ESI-ITFT..  2017.07.07 Justin B. Renaud, Ma..    CC BY-SA
#&gt;            copyright            publication                 splash compound_id
#&gt;          &lt;character&gt;            &lt;character&gt;            &lt;character&gt;   &lt;integer&gt;
#&gt; 1 Copyright (C) 2017 Renaud, J. B.; Sumar.. splash10-03fr-090000..           1
#&gt; 2 Copyright (C) 2017 Renaud, J. B.; Sumar.. splash10-03fr-090000..           2
#&gt; 3 Copyright (C) 2017 Renaud, J. B.; Sumar.. splash10-03fr-090000..           3
#&gt;        adduct  ionization ionizationVoltage fragmentationMode
#&gt;   &lt;character&gt; &lt;character&gt;       &lt;character&gt;       &lt;character&gt;
#&gt; 1      [M+H]+         ESI            3.9 kV               HCD
#&gt; 2      [M+H]+         ESI            3.9 kV               HCD
#&gt; 3      [M+H]+         ESI            3.9 kV               HCD
#&gt;   collisionEnergyText
#&gt;           &lt;character&gt;
#&gt; 1             10(NCE)
#&gt; 2             20(NCE)
#&gt; 3             30(NCE)</div><div class='input'>
<span class='co'>## Add a new spectra variable</span>
<span class='va'>be</span><span class='op'>$</span><span class='va'>new_variable</span> <span class='op'>&lt;-</span> <span class='st'>"b"</span>
<span class='va'>be</span><span class='op'>$</span><span class='va'>new_variable</span>
</div><div class='output co'>#&gt; [1] "b" "b" "b"</div><div class='input'>
<span class='co'>## Subset the backend</span>
<span class='va'>be_sub</span> <span class='op'>&lt;-</span> <span class='va'>be</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>3</span>, <span class='fl'>1</span><span class='op'>)</span><span class='op'>]</span>

<span class='fu'>spectraNames</span><span class='op'>(</span><span class='va'>be</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [1] "AC000001" "AC000002" "AC000003"</div><div class='input'><span class='fu'>spectraNames</span><span class='op'>(</span><span class='va'>be_sub</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [1] "AC000003" "AC000001"</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Michael Witting, Johannes Rainer.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.9000.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


